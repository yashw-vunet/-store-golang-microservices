FROM ubuntu:latest

# Install necessary dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    curl \
    git

# Install Go
ENV GOROOT=/usr/local/go
ENV GOPATH=$HOME/go
ENV PATH=$GOPATH/bin:$GOROOT/bin:$PATH

RUN curl -sSL https://dl.google.com/go/go1.16.5.linux-amd64.tar.gz | tar -C /usr/local -xz && \
    go version

# Set the working directory
WORKDIR /app

# Copy the source code
COPY . .

# Build the application
RUN go build -o main .

# Expose the port
EXPOSE 8080

# Set the entrypoint command
CMD ["./main"]
